<?php 
	
?>
<!DOCTYPE html>
<html>
<head>
	<title>Son et Compression - TPE</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<header>
		<img src="images/logon.jpg" class="logon logo">
		<!-- <img src="images/logob.jpg" class="logob logo"> Pur l'animation que g abandonné-->
		<h1>Son et compression des fichiers</h1>
	</header>
	<div class="retour">
		<div class="contret">
			<span></span>
		</div>
	</div>
	<div class="reduire">
		<span></span>					
	</div>
	<div class="ouvrir">
		<span></span>					
	</div>
	<section class="corp acc">
		<div class="page p1">
			<article class="content" id="c1">
				<h2>Les ondes sonores</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In faucibus, neque at dignissim ullamcorper, sapien mi ullamcorper nulla, lacinia tristique dolor nulla at lorem. Nulla eget odio volutpat, tincidunt velit ut, tincidunt nisl. Nulla pretium mi eget neque consequat varius. Maecenas magna odio, viverra in purus vitae, interdum congue ligula. Maecenas eget lorem quam. Suspendisse elementum aliquam egestas. Quisque aliquet ac dui at molestie. Donec tellus nunc, suscipit quis elit viverra, lobortis luctus enim. Quisque est massa, fermentum at bibendum vel, posuere a nisl. 
				Pellentesque lacus ante, bibendum sed nibh sit amet, ultrices convallis nulla. Donec id enim elit. Fusce imperdiet luctus tempus. Curabitur justo tortor, aliquam efficitur fringilla sed, aliquam imperdiet erat. Duis ut risus a velit varius tristique eget ut magna. Cras id elit eu lorem vehicula feugiat. Donec rhoncus consectetur felis, a suscipit augue. Praesent eget fringilla nulla. In sagittis urna varius, auctor erat ac, suscipit ipsum. Nunc sagittis odio vitae lorem egestas viverra. </p>
				<video src="images/desi.mp4" autoplay="" loop="" muted="" poster="images/cube.jpg" class="video"></video>

			</article>
			<aside class="ascontent" id="a1">

				<img src="images/a row.jpg" id="d1opened" class="imgopened">
				<div class="asidebut">
					<button style="opacity: 0;" class="prec navig">Précédent</button>
					<button class="suiv navig">Suivant</button>
				</div>
			</aside>
			<div class="blur">
			</div>
			<div class="rightbar">
				<img src="images/a row.jpg" id="bgd1" class="bgrightbar">
			</div>
		</div>
		<div class="page p2">
			<article class="content" id="c2">
				<h2>Octave et vibration</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In faucibus, neque at dignissim ullamcorper, sapien mi ullamcorper nulla, lacinia tristique dolor nulla at lorem. Nulla eget odio volutpat, tincidunt velit ut, tincidunt nisl. Nulla pretium mi eget neque consequat varius. Maecenas magna odio, viverra in purus vitae, interdum congue ligula. Maecenas eget lorem quam. Suspendisse elementum aliquam egestas. Quisque aliquet ac dui at molestie. Donec tellus nunc, suscipit quis elit viverra, lobortis luctus enim. Quisque est massa, fermentum at bibendum vel, posuere a nisl. 
				Pellentesque lacus ante, bibendum sed nibh sit amet, ultrices convallis nulla. Donec id enim elit. Fusce imperdiet luctus tempus. Curabitur justo tortor, aliquam efficitur fringilla sed, aliquam imperdiet erat. Duis ut risus a velit varius tristique eget ut magna. Cras id elit eu lorem vehicula feugiat. Donec rhoncus consectetur felis, a suscipit augue. Praesent eget fringilla nulla. In sagittis urna varius, auctor erat ac, suscipit ipsum. Nunc sagittis odio vitae lorem egestas viverra. </p>
				<span class="code">Code</span>

			</article>
			<aside class="ascontent" id="a2">
				<img src="images/bcube.jpg" id="d2opened" class="imgopened">
				<div class="asidebut">
					<button class="prec navig">Précédent</button>
					<button class="suiv navig">Suivant</button>
				</div>
			</aside>
			<div class="blur">
			</div>
			<div class="rightbar">
				<img src="images/bcube.jpg" id="bgd2" class="bgrightbar">
			</div>
		</div>
		<div class="page p3">
			<article class="content" id="c3">
				<h2>Principes de la transormation fourrier</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In faucibus, neque at dignissim ullamcorper, sapien mi ullamcorper nulla, lacinia tristique dolor nulla at lorem. Nulla eget odio volutpat, tincidunt velit ut, tincidunt nisl. Nulla pretium mi eget neque consequat varius. Maecenas magna odio, viverra in purus vitae, interdum congue ligula. Maecenas eget lorem quam. Suspendisse elementum aliquam egestas. Quisque aliquet ac dui at molestie. Donec tellus nunc, suscipit quis elit viverra, lobortis luctus enim. Quisque est massa, fermentum at bibendum vel, posuere a nisl. 
				Pellentesque lacus ante, bibendum sed nibh sit amet, ultrices convallis nulla. Donec id enim elit. Fusce imperdiet luctus tempus. Curabitur justo tortor, aliquam efficitur fringilla sed, aliquam imperdiet erat. Duis ut risus a velit varius tristique eget ut magna. Cras id elit eu lorem vehicula feugiat. Donec rhoncus consectetur felis, a suscipit augue. Praesent eget fringilla nulla. In sagittis urna varius, auctor erat ac, suscipit ipsum. Nunc sagittis odio vitae lorem egestas viverra. </p>
				<span class="rq">Remarque</span>

			</article>
			<aside class="ascontent" id="a3">
				<img src="images/colors.jpg" id="d3opened" class="imgopened">
				<div class="asidebut">
					<button class="prec navig">Précédent</button>
					<button class="suiv navig">Suivant</button>
				</div>
			</aside>
			<div class="blur">
			</div>
			<div class="rightbar">
				<img src="images/colors.jpg" id="bgd3" class="bgrightbar">
			</div>
		</div>
		<div class="page p4">
			<article class="content" id="c4">
				<h2>Enroulement de la fonction</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In faucibus, neque at dignissim ullamcorper, sapien mi ullamcorper nulla, lacinia tristique dolor nulla at lorem. Nulla eget odio volutpat, tincidunt velit ut, tincidunt nisl. Nulla pretium mi eget neque consequat varius. Maecenas magna odio, viverra in purus vitae, interdum congue ligula. Maecenas eget lorem quam. Suspendisse elementum aliquam egestas. Quisque aliquet ac dui at molestie. Donec tellus nunc, suscipit quis elit viverra, lobortis luctus enim. Quisque est massa, fermentum at bibendum vel, posuere a nisl. 
				Pellentesque lacus ante, bibendum sed nibh sit amet, ultrices convallis nulla. Donec id enim elit. Fusce imperdiet luctus tempus. Curabitur justo tortor, aliquam efficitur fringilla sed, aliquam imperdiet erat. Duis ut risus a velit varius tristique eget ut magna. Cras id elit eu lorem vehicula feugiat. Donec rhoncus consectetur felis, a suscipit augue. Praesent eget fringilla nulla. In sagittis urna varius, auctor erat ac, suscipit ipsum. Nunc sagittis odio vitae lorem egestas viverra. </p>
				<figure><img src="images/sheetel.jpg"><figcaption>figcaption</figcaption></figure>

			</article>
			<aside class="ascontent" id="a4">
				<img src="images/extend.jpg" id="d4opened" class="imgopened">
				<div class="asidebut">
					<button class="prec navig">Précédent</button>
					<button class="suiv navig">Suivant</button>
				</div>
			</aside>
			<div class="blur">
			</div>
			<div class="rightbar">
				<img src="images/extend.jpg" id="bgd4" class="bgrightbar">
			</div>
		</div>
		<div class="page p5">
			<article class="content" id="c5">
				<h2>Interprétaion des résultats</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In faucibus, neque at dignissim ullamcorper, sapien mi ullamcorper nulla, lacinia tristique dolor nulla at lorem. Nulla eget odio volutpat, tincidunt velit ut, tincidunt nisl. Nulla pretium mi eget neque consequat varius. Maecenas magna odio, viverra in purus vitae, interdum congue ligula. Maecenas eget lorem quam. Suspendisse elementum aliquam egestas. Quisque aliquet ac dui at molestie. Donec tellus nunc, suscipit quis elit viverra, lobortis luctus enim. Quisque est massa, fermentum at bibendum vel, posuere a nisl. 
				Pellentesque lacus ante, bibendum sed nibh sit amet, ultrices convallis nulla. Donec id enim elit. Fusce imperdiet luctus tempus. Curabitur justo tortor, aliquam efficitur fringilla sed, aliquam imperdiet erat. Duis ut risus a velit varius tristique eget ut magna. Cras id elit eu lorem vehicula feugiat. Donec rhoncus consectetur felis, a suscipit augue. Praesent eget fringilla nulla. In sagittis urna varius, auctor erat ac, suscipit ipsum. Nunc sagittis odio vitae lorem egestas viverra. </p>

			</article>
			<aside class="ascontent" id="a5">
				<img src="images/line.jpg" id="d5opened" class="imgopened">
				<div class="asidebut">
					<button class="prec navig">Précédent</button>
					<button class="suiv navig">Suivant</button>
				</div>
			</aside>
			<div class="blur">
			</div>
			<div class="rightbar">
				<img src="images/line.jpg" id="bgd5" class="bgrightbar">
			</div>
		</div>
		<div class="page p6">
			<article class="content" id="c6">
				<h2>Transormation fourrier rapide</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In faucibus, neque at dignissim ullamcorper, sapien mi ullamcorper nulla, lacinia tristique dolor nulla at lorem. Nulla eget odio volutpat, tincidunt velit ut, tincidunt nisl. Nulla pretium mi eget neque consequat varius. Maecenas magna odio, viverra in purus vitae, interdum congue ligula. Maecenas eget lorem quam. Suspendisse elementum aliquam egestas. Quisque aliquet ac dui at molestie. Donec tellus nunc, suscipit quis elit viverra, lobortis luctus enim. Quisque est massa, fermentum at bibendum vel, posuere a nisl. 
				Pellentesque lacus ante, bibendum sed nibh sit amet, ultrices convallis nulla. Donec id enim elit. Fusce imperdiet luctus tempus. Curabitur justo tortor, aliquam efficitur fringilla sed, aliquam imperdiet erat. Duis ut risus a velit varius tristique eget ut magna. Cras id elit eu lorem vehicula feugiat. Donec rhoncus consectetur felis, a suscipit augue. Praesent eget fringilla nulla. In sagittis urna varius, auctor erat ac, suscipit ipsum. Nunc sagittis odio vitae lorem egestas viverra. </p>
				<video src="images/desy.mp4" autoplay="" muted="" loop="" poster="images/cube.jpg" class="video"></video>

			</article>
			<aside class="ascontent" id="a6">
				<img src="images/shadow.jpg" id="d6opened" class="imgopened">
				<div class="asidebut">
					<button class="prec navig">Précédent</button>
					<button style="opacity: 0;" class="suiv navig">Suivant</button>
				</div>
			</aside>
			<div class="blur">
			</div>
			<div class="rightbar">
				<img src="images/shadow.jpg" id="bgd6" class="bgrightbar">
			</div>
		</div>
		<div class="gridcontainer">
			<div class="diapocontain dc1">
				<img src="images/a row.jpg" id="d1" class="diapo">
			</div>
			<div class="diapocontain dc2">
				<img src="images/bcube.jpg" id="d2"  class="diapo">
			</div>
			<div class="diapocontain dc3">
				<img src="images/colors.jpg" id="d3"  class="diapo">
			</div>
			<div class="diapocontain dc4">
				<img src="images/extend.jpg" id="d4"  class="diapo">
			</div>
			<div class="diapocontain dc5">
				<img src="images/line.jpg" id="d5"  class="diapo">
			</div>
			<div class="diapocontain dc6">
				<img src="images/shadow.jpg" id="d6"  class="diapo">
			</div>
		</div>
	</section>
	<footer></footer>
	<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function (){
			
			openanimdiapo();
			var nbdiapo = 6; 
			var position = 0;

			window.onpopstate = function(event){ // https://youtu.be/L4QlCWUBdRg
				/*if (event.state == null) {*/
					retour();
					console.log(event);
					console.log(event.state.key);
				/*}*/
			}

			<?php for ($index = 1; $index <= 6 ; $index++) { ?>
				$('.dc'+ <?php echo($index); ?> +'').click(function(){

					opendiapo(<?php echo($index); ?>);
					position = <?php echo($index); ?>;
					
				});
			<?php } ?>

			$('.retour').click(function(){
				retour();
			});

			$('.reduire').click(function() {
				$('.content').css({'padding':'0px 20px'});
				$('.rightbar, .blur, .ascontent').css({'transform':'translateX(420px)'});
				$('.reduire').css({'display':'none'});
				setTimeout(function(){
					$('.ouvrir').css({'display':'block'});
				}, 300);
				
			});

			$('.ouvrir').click(function() {
				$('.content').css({'padding-right':'440px'});
				$('.rightbar, .blur, .content').css({'transition-duration':'200ms'});
				$('.rightbar, .blur, .ascontent').css({'transform':'translateX(0px)'});
				setTimeout(function(){
					$('.rightbar, .blur, .content').css({'transition-duration':'400ms'});
					$('.reduire').css({'display':'block'});
				}, 300);
				$('.ouvrir').css({'display':'none'});
			});

			$('.suiv').click(function() {
				if (position < nbdiapo) {
					move(position, 'suiv');
					position++;
				}

			});

			$('.prec').click(function() {
				if (position > 1) {
					move(position, 'prec');
					position--;
				}

			});

		}); 

		function opendiapo(num){

					history.pushState({key : ''+ num}, 'titre', 'diapo/d'+ num +'.php'); // https://youtu.be/L4QlCWUBdRg

					$('body').css({'overflow-x':'hidden'});
					setTimeout(function (){
						$('.p'+ num +'').css({'display':'block'});
						$('.p'+ num +'').css({'opacity':'1'});
						setpos('#a'+ num +'', getimgpos('#d'+ num +'').left, getimgpos('#d'+ num +'').top);
						setwidth('#a'+ num +'', getwidth('#d'+ num +''));
						setTimeout(function (){
							$('.retour').css({'display':'block'});
							$('.retour').css({'opacity':'1'});
							$('.retour').css({'left':'5px'});

							$('.content').css({'transform':'translateX(0px)'});
							$('#a'+ num +'').css({'transition':'all 300ms cubic-bezier(0.8 , 0 , 0.2 , 1)'});
							$('#a'+ num +'').css({'left':'100%'});
							$('#a'+ num +'').css({'width':'400px'});
							$('#a'+ num +'').css({'margin-left':'-410px'});
							$('#a'+ num +'').css({'top':'10px'});
							$('.rightbar, .blur').css({'width':'420px'});
							$('.reduire').css({'display':'block'});
						}, 100);
					}, 1);
					
				}

		function retour() {
			position = 0;
			history.pushState(null, 'titre', '/TPE/'); // https://youtu.be/L4QlCWUBdRg
			setTimeout(function(){
						
				$('.retour').css({'opacity':'0'});
				$('.retour').css({'left':'-20px'});
				$('.retour').css({'transition':'all 150ms cubic-bezier(0.7 , 0 , 1 , 0.5)'});
					
					$('.content').css({'transform':'translateX(200px)'});
					$('.ascontent').css({'margin-left':'0px'});
					$('.rightbar, .blur').css({'width':'0px'});
			}, 100);

			setTimeout(function(){
				$('.page').css({'opacity':'0'});

				$('.reduire').css({'display':'none'});
				$('.ouvrir').css({'display':'none'});
				$('.rightbar, .blur, .ascontent').css({'transform':'translateX(0px)'});
				$('.content').css({'padding-right':'440px'});
			}, 300);

			setTimeout(function(){
				$('.rightbar, .blur').css({'width':'100%'});
				$('.ascontent').css({'transition':''});
				$('.retour').css({'display':'none'});
				$('.retour').css({'transition':'500ms all 500ms cubic-bezier(0.1 , 0.9 , 0.2 , 1)'});
				$('.page').css({'display':'none'});
				$('body').css({'overflow':'auto'});
				$('.content').css({'transform':'translateX(-100px)'});
			}, 600);
		}

		function move(pos, dir){
			if (dir == 'suiv') {
				var to = pos+1 ;

				/* $('.p'+ pos +'').css({'transform':'translateX(-200px)'}); Crée des problèmes avec .blur*/

				setTimeout(function(){
					/*$('.p'+ pos +'').css({'transform':'translateX(0px)'});*/
					$('.p'+ pos +'').css({'display':'none'});
					$('.p'+ pos +'').css({'opacity':'0'});
				}, 300);

				$('.p'+ to +'').css({'display':'block'});
				$('.p'+ to +'').css({'opacity':'1'});

				$('.content').css({'transform':'translateX(0px)'});
				$('#a'+ to +'').css({'transition':'all 300ms cubic-bezier(0.8 , 0 , 0.2 , 1)'});
				$('#a'+ to +'').css({'left':'100%'});
				$('#a'+ to +'').css({'width':'400px'});
				$('#a'+ to +'').css({'margin-left':'-410px'});
				$('#a'+ to +'').css({'top':'10px'});
				$('.rightbar, .blur').css({'width':'420px'});

			}
			else if(dir == 'prec') {

				var to = pos-1;

				/*$('.p'+ pos +'').css({'transform':'translateX(100%)'});*/
				setTimeout(function(){
					$('.p'+ pos +'').css({'opacity':'0'});
				}, 100);
				

				setTimeout(function(){
					/*$('.p'+ pos +'').css({'transform':'translateX(0px)'});*/
					$('.p'+ pos +'').css({'display':'none'});
					
				}, 400);

				$('.p'+ to +'').css({'display':'block'});
				$('.p'+ to +'').css({'opacity':'1'});

				$('.content').css({'transform':'translateX(0px)'});
				$('#a'+ to +'').css({'transition':'all 300ms cubic-bezier(0.8 , 0 , 0.2 , 1)'});
				$('#a'+ to +'').css({'left':'100%'});
				$('#a'+ to +'').css({'width':'400px'});
				$('#a'+ to +'').css({'margin-left':'-410px'});
				$('#a'+ to +'').css({'top':'10px'});
				$('.rightbar, .blur').css({'width':'420px'});

			}

			history.pushState({key : 'move', pos : ''+ pos}, 'titre', '../diapo/d'+ to +'.php'); // https://youtu.be/L4QlCWUBdRg
		};

		function openanimdiapo(){
			$('.diapocontain').css({'opacity':'0'});
			$('.diapocontain').css({'transform':'translateY(50px)'});
			$('.diapocontain').each(function(i){
				setTimeout(function(){
					$('.diapocontain').eq(i).css({'transition':'all 300ms cubic-bezier(0.1 , 0.9 , 0.2 , 1)'});
					$('.diapocontain').eq(i).css({'opacity':'1'});
					$('.diapocontain').eq(i).css({'transform':'translateY(0px)'});
				}, 500+i*50);
			});
		}

		function getimgpos (id){
			var position = { left : Math.floor($(id).offset().left), top : Math.floor($(id).offset().top) };
	  		return( position );
		}

		function getwidth (id){
			var width = $(id).width();
	  		return( width );
		}

		function setwidth (id, width) {
			var obj = $(id);
			obj.css({'width':''+ width +'px'});
		}

		function setpos (id, left, top) {
			var obj = $(id);
			obj.css({'position':'absolute'});
			obj.css({'left':''+ left +'px'});
			obj.css({'top':''+ top +'px'});
		}
	</script>
</body>
</html>